  <!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tip Split App</title>

<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#111827" />

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background: #f1f5f9;
  margin: 0;
  padding: 14px;
}
h2, h3 { margin-top: 20px; }
.card {
  background: #fff;
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 14px;
  box-shadow: 0 4px 10px rgba(0,0,0,.06);
}
.floor-row {
  display: grid;
  grid-template-columns: 40px 1fr 1fr;
  gap: 8px;
  margin-bottom: 8px;
}
.split-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-bottom: 6px;
}
input {
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #cbd5e1;
  font-size: 16px;
}
button {
  padding: 10px 14px;
  border-radius: 8px;
  border: none;
  background: #111827;
  color: #fff;
  font-size: 14px;
}
.hour-row {
  display: grid;
  grid-template-columns: 1fr 80px;
  gap: 8px;
  margin-bottom: 6px;
}
.small {
  font-size: 13px;
  color: #64748b;
}
</style>
</head>

<body>

<h2>üí∞ Tip Split App</h2>

<div class="card">
<h3>üè¢ Floors</h3>

<div class="floor-row">
  <b>1F</b>
  <input type="number" placeholder="Cash" oninput="floors[1].cash=this.value; render()" />
  <input type="number" placeholder="Card" oninput="floors[1].card=this.value; render()" />
</div>

<div class="floor-row">
  <b>2F</b>
  <input type="number" placeholder="Cash" oninput="floors[2].cash=this.value; render()" />
  <input type="number" placeholder="Card" oninput="floors[2].card=this.value; render()" />
</div>

<div class="floor-row">
  <b>3F</b>
  <input type="number" placeholder="Cash" oninput="floors[3].cash=this.value; render()" />
  <input type="number" placeholder="Card" oninput="floors[3].card=this.value; render()" />
</div>
</div>

<div class="card">
<h3>‚ûï Extra Tip</h3>
<input type="number" placeholder="Extra Tip" oninput="extraTip=this.value; render()" />
</div>

<div class="card">
<h3>üìä ÌçºÏÑºÌä∏ / Ïù∏Ïõê Í∏∞Ï§Ä Î∂ÑÎ∞∞</h3>

<div id="splitRows"></div>

<div id="splitResult" class="small"></div>
</div>

<div class="card">
<h3>‚è±Ô∏è ÏãúÍ∞Ñ Í∏∞Ï§Ä ÌåÅ Î∂ÑÎ∞∞</h3>

<input type="number" placeholder="Ï¥ù Í∏àÏï°" oninput="hourAmount=this.value; renderHour()" />

<div id="hourRows"></div>
<button onclick="addHourRow()">+ Add Server</button>

<div id="hourResult" class="small"></div>
</div>

<script>
const floors = {
  1:{cash:0,card:0},
  2:{cash:0,card:0},
  3:{cash:0,card:0}
};
let extraTip = 0;

const splitRows = Array.from({length:5},()=>({percent:"",count:""}));

let hourAmount = 0;
let hourRows = [
  {name:"",hours:""},
  {name:"",hours:""}
];

function n(v){return Number(v||0);}

function totalTip(){
  return (
    n(floors[1].cash)+n(floors[1].card)+
    n(floors[2].cash)+n(floors[2].card)+
    n(floors[3].cash)+n(floors[3].card)+
    n(extraTip)
  );
}

function drawSplitRows(){
  document.getElementById("splitRows").innerHTML =
    splitRows.map((r,i)=>`
      <div class="split-row">
        <input type="number" placeholder="%"
          oninput="splitRows[${i}].percent=this.value; render()" />
        <input type="number" placeholder="People"
          oninput="splitRows[${i}].count=this.value; render()" />
      </div>
    `).join("");
}

function render(){
  const total = totalTip();
  const groups = splitRows
    .map(r=>({p:n(r.percent)/100,c:n(r.count)}))
    .filter(r=>r.p>0 && r.c>0);

  if(!groups.length){
    document.getElementById("splitResult").innerText =
      `Total Tip: $${total}`;
    return;
  }

  const weight = groups.reduce((s,g)=>s+g.p*g.c,0);
  const base = total/weight;

  const html = groups.map(g=>{
    const one = Math.floor(base*g.p);
    return `<li>${g.p*100}% √ó ${g.c}Î™Ö ‚Üí $${one} each</li>`;
  }).join("");

  document.getElementById("splitResult").innerHTML =
    `<b>Total Tip:</b> $${total}<ul>${html}</ul>`;
}

function drawHourRows(){
  document.getElementById("hourRows").innerHTML =
    hourRows.map((r,i)=>`
      <div class="hour-row">
        <input placeholder="Name"
          oninput="hourRows[${i}].name=this.value; renderHour()" />
        <input type="number" placeholder="Hours"
          oninput="hourRows[${i}].hours=this.value; renderHour()" />
      </div>
    `).join("");
}

function addHourRow(){
  if(hourRows.length>=8) return;
  hourRows.push({name:"",hours:""});
  drawHourRows();
}

function renderHour(){
  const clean = hourRows.filter(r=>n(r.hours)>0);
  if(!clean.length) return;

  const totalH = clean.reduce((s,r)=>s+n(r.hours),0);
  const per = hourAmount/totalH;

  document.getElementById("hourResult").innerHTML =
    "<ul>"+clean.map(r=>
      `<li>${r.name||"Unnamed"}: $${Math.floor(r.hours*per)}</li>`
    ).join("")+"</ul>";
}

drawSplitRows();
drawHourRows();
</script>

</body>
</html>
